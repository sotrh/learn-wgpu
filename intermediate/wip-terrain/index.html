<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Procedural Terrain | Learn Wgpu</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/learn-wgpu/assets/css/0.styles.5ee25272.css" as="style"><link rel="preload" href="/learn-wgpu/assets/js/app.9a4a1a92.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/3.09b12233.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/2.b4dddcef.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/32.f25ea1b1.js" as="script"><link rel="prefetch" href="/learn-wgpu/assets/js/1.3558807b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/10.6c8c503b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/11.7d5157d3.js"><link rel="prefetch" href="/learn-wgpu/assets/js/12.c7a7639b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/13.0ff211c0.js"><link rel="prefetch" href="/learn-wgpu/assets/js/14.9642a599.js"><link rel="prefetch" href="/learn-wgpu/assets/js/15.51116715.js"><link rel="prefetch" href="/learn-wgpu/assets/js/16.3e9d9b6a.js"><link rel="prefetch" href="/learn-wgpu/assets/js/17.6ca634b1.js"><link rel="prefetch" href="/learn-wgpu/assets/js/18.672c5b5d.js"><link rel="prefetch" href="/learn-wgpu/assets/js/19.6c77f371.js"><link rel="prefetch" href="/learn-wgpu/assets/js/20.684ce7f1.js"><link rel="prefetch" href="/learn-wgpu/assets/js/21.5f6cd02b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/22.83f1c0c1.js"><link rel="prefetch" href="/learn-wgpu/assets/js/23.2fee3e37.js"><link rel="prefetch" href="/learn-wgpu/assets/js/24.67b4ccc5.js"><link rel="prefetch" href="/learn-wgpu/assets/js/25.b2a2c7ec.js"><link rel="prefetch" href="/learn-wgpu/assets/js/26.f6d04d49.js"><link rel="prefetch" href="/learn-wgpu/assets/js/27.4ea91a9a.js"><link rel="prefetch" href="/learn-wgpu/assets/js/28.73721aa4.js"><link rel="prefetch" href="/learn-wgpu/assets/js/29.394fe4be.js"><link rel="prefetch" href="/learn-wgpu/assets/js/30.7049dcd5.js"><link rel="prefetch" href="/learn-wgpu/assets/js/31.5b1fe4b4.js"><link rel="prefetch" href="/learn-wgpu/assets/js/33.b8081be0.js"><link rel="prefetch" href="/learn-wgpu/assets/js/34.e12e647a.js"><link rel="prefetch" href="/learn-wgpu/assets/js/35.4a44c032.js"><link rel="prefetch" href="/learn-wgpu/assets/js/36.8dba74db.js"><link rel="prefetch" href="/learn-wgpu/assets/js/37.f9aa3b5e.js"><link rel="prefetch" href="/learn-wgpu/assets/js/38.2c99093b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/39.f2a3e671.js"><link rel="prefetch" href="/learn-wgpu/assets/js/4.a61b351a.js"><link rel="prefetch" href="/learn-wgpu/assets/js/40.a367c5f3.js"><link rel="prefetch" href="/learn-wgpu/assets/js/41.412b049e.js"><link rel="prefetch" href="/learn-wgpu/assets/js/42.f357fe57.js"><link rel="prefetch" href="/learn-wgpu/assets/js/43.b38b7739.js"><link rel="prefetch" href="/learn-wgpu/assets/js/44.aaea4c1c.js"><link rel="prefetch" href="/learn-wgpu/assets/js/45.1e7498eb.js"><link rel="prefetch" href="/learn-wgpu/assets/js/46.6114d33c.js"><link rel="prefetch" href="/learn-wgpu/assets/js/47.1917e7f6.js"><link rel="prefetch" href="/learn-wgpu/assets/js/48.156c0523.js"><link rel="prefetch" href="/learn-wgpu/assets/js/49.07fe607e.js"><link rel="prefetch" href="/learn-wgpu/assets/js/5.19ad0b17.js"><link rel="prefetch" href="/learn-wgpu/assets/js/50.a60afeb2.js"><link rel="prefetch" href="/learn-wgpu/assets/js/51.c0dfac19.js"><link rel="prefetch" href="/learn-wgpu/assets/js/52.f4eabe60.js"><link rel="prefetch" href="/learn-wgpu/assets/js/53.9f655aa8.js"><link rel="prefetch" href="/learn-wgpu/assets/js/54.0cda9847.js"><link rel="prefetch" href="/learn-wgpu/assets/js/55.6ab1edd5.js"><link rel="prefetch" href="/learn-wgpu/assets/js/56.4b35e9a5.js"><link rel="prefetch" href="/learn-wgpu/assets/js/57.075c5fd3.js"><link rel="prefetch" href="/learn-wgpu/assets/js/58.5afd0458.js"><link rel="prefetch" href="/learn-wgpu/assets/js/59.e7dc9841.js"><link rel="prefetch" href="/learn-wgpu/assets/js/6.d179b982.js"><link rel="prefetch" href="/learn-wgpu/assets/js/60.2fffa65d.js"><link rel="prefetch" href="/learn-wgpu/assets/js/61.2554209c.js"><link rel="prefetch" href="/learn-wgpu/assets/js/62.a6db7c6b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/63.2d962976.js"><link rel="prefetch" href="/learn-wgpu/assets/js/64.1145b7aa.js"><link rel="prefetch" href="/learn-wgpu/assets/js/65.b87d6054.js"><link rel="prefetch" href="/learn-wgpu/assets/js/66.d959165d.js"><link rel="prefetch" href="/learn-wgpu/assets/js/67.a7f2aa0d.js"><link rel="prefetch" href="/learn-wgpu/assets/js/68.e2e7e4a1.js"><link rel="prefetch" href="/learn-wgpu/assets/js/69.9a9d764c.js"><link rel="prefetch" href="/learn-wgpu/assets/js/70.1ed92f63.js"><link rel="prefetch" href="/learn-wgpu/assets/js/71.c41dfa6b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/72.1d5552c3.js"><link rel="prefetch" href="/learn-wgpu/assets/js/73.b8cd0f6f.js"><link rel="prefetch" href="/learn-wgpu/assets/js/74.69214846.js"><link rel="prefetch" href="/learn-wgpu/assets/js/75.29d78a6a.js"><link rel="prefetch" href="/learn-wgpu/assets/js/76.9016232b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/77.8c3adad6.js"><link rel="prefetch" href="/learn-wgpu/assets/js/78.f833163e.js"><link rel="prefetch" href="/learn-wgpu/assets/js/79.0210a74b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/80.7e9523bf.js"><link rel="prefetch" href="/learn-wgpu/assets/js/9.36fe1add.js"><link rel="prefetch" href="/learn-wgpu/assets/js/vendors~docsearch.d6596893.js">
    <link rel="stylesheet" href="/learn-wgpu/assets/css/0.styles.5ee25272.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="inner"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-wgpu/" class="home-link router-link-active"><!----> <span class="site-name">Learn Wgpu</span></a> <div class="links"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="docs-layout"><aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/learn-wgpu/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Beginner</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu/beginner/tutorial1-window/" class="sidebar-link">Dependencies and the window</a></li><li><a href="/learn-wgpu/beginner/tutorial2-surface/" class="sidebar-link">The Surface</a></li><li><a href="/learn-wgpu/beginner/tutorial3-pipeline/" class="sidebar-link">The Pipeline</a></li><li><a href="/learn-wgpu/beginner/tutorial4-buffer/" class="sidebar-link">Buffers and Indices</a></li><li><a href="/learn-wgpu/beginner/tutorial5-textures/" class="sidebar-link">Textures and bind groups</a></li><li><a href="/learn-wgpu/beginner/tutorial6-uniforms/" class="sidebar-link">Uniform buffers and a 3d camera</a></li><li><a href="/learn-wgpu/beginner/tutorial7-instancing/" class="sidebar-link">Instancing</a></li><li><a href="/learn-wgpu/beginner/tutorial8-depth/" class="sidebar-link">The Depth Buffer</a></li><li><a href="/learn-wgpu/beginner/tutorial9-models/" class="sidebar-link">Model Loading</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Intermediate</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu/intermediate/tutorial10-lighting/" class="sidebar-link">Working with Lights</a></li><li><a href="/learn-wgpu/intermediate/tutorial11-normals/" class="sidebar-link">Normal Mapping</a></li><li><a href="/learn-wgpu/intermediate/tutorial12-camera/" class="sidebar-link">A Better Camera</a></li><li><a href="/learn-wgpu/intermediate/tutorial13-hdr/" class="sidebar-link">High Dynamic Range Rendering</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Compute Pipelines</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Showcase</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>News</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="procedural-terrain"><a href="#procedural-terrain" class="header-anchor">#</a> Procedural Terrain</h1> <p>Up to this point, we've been working in an empty void. This is great when you want to get your shading code just right, but most applications will want to fill the screen with more interesting things. You could approach this in a variety of ways. You could create a bunch of models in Blender and load them into the scene. This method works great if you have some decent artistic skills and some patience. I'm lacking in both those departments, so let's write some code to make something that looks nice.</p> <p>As the name of this article suggests, we're going to create a terrain. Now, the traditional method to create a terrain mesh is to use a pre-generated noise texture and sample it to get the height values at each point in the mesh. This is a valid approach, but I opted to generate the noise using a compute shader directly. Let's get started!</p> <h2 id="compute-shaders"><a href="#compute-shaders" class="header-anchor">#</a> Compute Shaders</h2> <p>A compute shader is simply a shader that allows you to leverage the GPU's parallel computing power for arbitrary tasks. You can use them for anything from creating a texture to running a neural network. I'll get more into how they work in a bit, but for now, suffice to say that we're going to use them to create the vertex and index buffers for our terrain.</p> <div class="note"><p>As of writing, compute shaders are still experimental on the web. You can enable them on beta versions of browsers such as Chrome Canary and Firefox Nightly. Because of this, I'll cover a method to use a fragment shader to compute the vertex and index buffers after we cover the compute shader method.</p></div> <h2 id="noise-functions"><a href="#noise-functions" class="header-anchor">#</a> Noise Functions</h2> <p>Let's start with the shader code for the compute shader. First, we'll create the noise functions. Then, we'll create the compute shader's entry function. Create a new file called <code>terrain.wgsl</code>. Then add the following:</p> <div class="language-wgsl extra-class"><pre class="language-wgsl"><code><span class="token comment">// ============================</span>
<span class="token comment">// Terrain Generation</span>
<span class="token comment">// ============================</span>

<span class="token comment">// https://gist.github.com/munrocket/236ed5ba7e409b8bdf1ff6eca5dcdc39</span>
<span class="token comment">//  MIT License. Â© Ian McEwan, Stefan Gustavson, Munrocket</span>
<span class="token comment">// - Less condensed glsl implementation with comments can be found at https://weber.itn.liu.se/~stegu/jgt2012/article.pdf</span>

<span class="token keyword">fn</span> <span class="token functions function">permute3</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token decimal-float-literal number">34.</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token decimal-float-literal number">1.</span><span class="token punctuation">)</span> <span class="token operator">*</span> x<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">289.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token functions function">snoise2</span><span class="token punctuation">(</span>v<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token builtin">f32</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token class-name">C</span> <span class="token operator">=</span> <span class="token builtin">vec4</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.211324865405187</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.366025403784439</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token decimal-float-literal number">0.577350269189626</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.024390243902439</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> i<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token operator">=</span> <span class="token builtin">floor</span><span class="token punctuation">(</span>v <span class="token operator">+</span> <span class="token builtin">dot</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token class-name">C</span><span class="token punctuation">.</span>yy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> x0 <span class="token operator">=</span> v <span class="token operator">-</span> i <span class="token operator">+</span> <span class="token builtin">dot</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">C</span><span class="token punctuation">.</span>xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// I flipped the condition here from &gt; to &lt; as it fixed some artifacting I was observing</span>
  <span class="token keyword">var</span> i1<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token operator">=</span> <span class="token builtin">select</span><span class="token punctuation">(</span><span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">1.</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">1.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token decimal-float-literal number">0.</span>x <span class="token punctuation">&lt;</span> x<span class="token decimal-float-literal number">0.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> x12<span class="token punctuation">:</span> <span class="token builtin">vec4</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token operator">=</span> x<span class="token decimal-float-literal number">0.</span>xyxy <span class="token operator">+</span> <span class="token class-name">C</span><span class="token punctuation">.</span>xxzz <span class="token operator">-</span> <span class="token builtin">vec4</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span>i1<span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  i <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">289.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token function-calls function">permute3</span><span class="token punctuation">(</span><span class="token function-calls function">permute3</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.</span><span class="token punctuation">,</span> i<span class="token decimal-float-literal number">1.</span>y<span class="token punctuation">,</span> <span class="token decimal-float-literal number">1.</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.</span><span class="token punctuation">,</span> i<span class="token decimal-float-literal number">1.</span>x<span class="token punctuation">,</span> <span class="token decimal-float-literal number">1.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> m<span class="token punctuation">:</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.5</span> <span class="token operator">-</span>
      <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token builtin">dot</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span> x0<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">dot</span><span class="token punctuation">(</span>x<span class="token decimal-float-literal number">12.</span>xy<span class="token punctuation">,</span> x<span class="token decimal-float-literal number">12.</span>xy<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">dot</span><span class="token punctuation">(</span>x<span class="token decimal-float-literal number">12.</span>zw<span class="token punctuation">,</span> x<span class="token decimal-float-literal number">12.</span>zw<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  m <span class="token operator">=</span> m <span class="token operator">*</span> m<span class="token punctuation">;</span>
  m <span class="token operator">=</span> m <span class="token operator">*</span> m<span class="token punctuation">;</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token decimal-float-literal number">2.</span> <span class="token operator">*</span> <span class="token builtin">fract</span><span class="token punctuation">(</span>p <span class="token operator">*</span> <span class="token class-name">C</span><span class="token punctuation">.</span>www<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token decimal-float-literal number">1.</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token decimal-float-literal number">0.5</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> ox <span class="token operator">=</span> <span class="token builtin">floor</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token decimal-float-literal number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> a0 <span class="token operator">=</span> x <span class="token operator">-</span> ox<span class="token punctuation">;</span>
  m <span class="token operator">=</span> m <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token decimal-float-literal number">1.79284291400159</span> <span class="token operator">-</span> <span class="token decimal-float-literal number">0.85373472095314</span> <span class="token operator">*</span> <span class="token punctuation">(</span>a0 <span class="token operator">*</span> a0 <span class="token operator">+</span> h <span class="token operator">*</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span>a<span class="token decimal-float-literal number">0.</span>x <span class="token operator">*</span> x<span class="token decimal-float-literal number">0.</span>x <span class="token operator">+</span> h<span class="token punctuation">.</span>x <span class="token operator">*</span> x<span class="token decimal-float-literal number">0.</span>y<span class="token punctuation">,</span> a<span class="token decimal-float-literal number">0.</span>yz <span class="token operator">*</span> x<span class="token decimal-float-literal number">12.</span>xz <span class="token operator">+</span> h<span class="token punctuation">.</span>yz <span class="token operator">*</span> x<span class="token decimal-float-literal number">12.</span>yw<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token decimal-float-literal number">130.</span> <span class="token operator">*</span> <span class="token builtin">dot</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Some of my readers may recognize this as an implementation of Simplex noise (specifically OpenSimplex noise). I'll admit to not really understanding the math behind OpenSimplex noise. The basics are that it's similar to Perlin Noise, but instead of a square grid, it's a hexagonal grid that removes some of the artifacts that generating the noise on a square grid gets you. Again, I'm not an expert on this, so to summarize: <code>permute3()</code> takes a <code>vec3</code> and returns a pseudorandom <code>vec3</code>, <code>snoise2()</code> takes a <code>vec2</code> and returns a floating point number between [-1, 1]. If you want to learn more about noise functions, check out <a href="https://thebookofshaders.com/11/" target="_blank" rel="noopener noreferrer">this article from The Book of Shaders<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The code's in GLSL, but the concepts are the same.</p> <p>While we can use the output of <code>snoise</code> directly to generate the terrain's height values, the result of this tends to be very smooth, which may be what you want, but it doesn't look very organic, as you can see below:</p> <p><img src="/learn-wgpu/assets/img/figure_no-fbm.1931fe05.png" alt="smooth terrain"></p> <p>To make the terrain a bit rougher, we're going to use a technique called <a href="https://thebookofshaders.com/13/" target="_blank" rel="noopener noreferrer">Fractal Brownian Motion<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This technique works by sampling the noise function multiple times, cutting the strength in half each time while doubling the frequency of the noise. This means that the overall shape of the terrain will be fairly smooth, but it will have sharper details. You can see what that will look like below:</p> <p><img src="/learn-wgpu/assets/img/figure_fbm.28310498.png" alt="more organic terrain"></p> <p>The code for this function is actually quite simple:</p> <div class="language-wgsl extra-class"><pre class="language-wgsl"><code><span class="token keyword">fn</span> <span class="token functions function">fbm</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token builtin">f32</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> NUM_OCTAVES<span class="token punctuation">:</span> <span class="token builtin">u32</span> <span class="token operator">=</span> <span class="token int-literal number">5u</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> p <span class="token operator">*</span> <span class="token decimal-float-literal number">0.01</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token decimal-float-literal number">0.0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token decimal-float-literal number">0.5</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> shift <span class="token operator">=</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">100.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> cs <span class="token operator">=</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token builtin">cos</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">sin</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> rot <span class="token operator">=</span> <span class="token builtin">mat2x2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span>cs<span class="token punctuation">.</span>x<span class="token punctuation">,</span> cs<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token operator">-</span>cs<span class="token punctuation">.</span>y<span class="token punctuation">,</span> cs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token int-literal number">0u</span><span class="token punctuation">;</span> i<span class="token punctuation">&lt;</span>NUM_OCTAVES<span class="token punctuation">;</span> i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token int-literal number">1u</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        v <span class="token operator">=</span> v <span class="token operator">+</span> a <span class="token operator">*</span> <span class="token function-calls function">snoise2</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        x <span class="token operator">=</span> rot <span class="token operator">*</span> x <span class="token operator">*</span> <span class="token decimal-float-literal number">2.0</span> <span class="token operator">+</span> shift<span class="token punctuation">;</span>
        a <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token decimal-float-literal number">0.5</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let's go over this for a bit:</p> <ul><li>The <code>NUM_OCTAVES</code> constant is the number of levels of noise you want. More octaves will add more texture to the terrain mesh, but you'll get diminishing returns at higher levels. I find that 5 is a good number.</li> <li>We multiply <code>p</code> by <code>0.01</code> to &quot;zoom in&quot; on the noise function. This is because our mesh will be 1x1 quads, and the simplex noise function resembles white noise when stepping by one each time. You can see what it looks like to use <code>p</code> directly: <img src="/learn-wgpu/assets/img/figure_spiky.46babb7a.png" alt="spiky terrain"></li> <li>The <code>a</code> variable is the amplitude of the noise at the given noise level.</li> <li><code>shift</code> and <code>rot</code> are used to reduce artifacts in the generated noise. One such artifact is that at <code>0,0</code>, the output of the <code>snoise</code> will always be the same regardless of how much you scale <code>p</code>.</li></ul> <h2 id="generating-the-mesh"><a href="#generating-the-mesh" class="header-anchor">#</a> Generating the mesh</h2> <p>To generate the terrain mesh, we're going to need to pass some information into the shader:</p> <div class="language-wgsl extra-class"><pre class="language-wgsl"><code><span class="token keyword">struct</span> <span class="token class-name">ChunkData</span> <span class="token punctuation">{</span>
    chunk_size<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">u32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
    chunk_corner<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">i32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
    min_max_height<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
    <span class="token punctuation">@</span><span class="token attributes attr-name">location</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> position<span class="token punctuation">:</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">@</span><span class="token attributes attr-name">location</span><span class="token punctuation">(</span><span class="token int-literal number">1</span><span class="token punctuation">)</span> normal<span class="token punctuation">:</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">VertexBuffer</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token builtin">array</span><span class="token punctuation">&lt;</span><span class="token class-name">Vertex</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token comment">// stride: 32</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">IndexBuffer</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token builtin">array</span><span class="token punctuation">&lt;</span><span class="token builtin">u32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token punctuation">@</span><span class="token attributes attr-name">group</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> <span class="token punctuation">@</span><span class="token attributes attr-name">binding</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> <span class="token keyword">var</span><span class="token punctuation">&lt;</span><span class="token keyword">uniform</span><span class="token punctuation">&gt;</span> chunk_data<span class="token punctuation">:</span> <span class="token class-name">ChunkData</span><span class="token punctuation">;</span>
<span class="token punctuation">@</span><span class="token attributes attr-name">group</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span><span class="token punctuation">@</span><span class="token attributes attr-name">binding</span><span class="token punctuation">(</span><span class="token int-literal number">1</span><span class="token punctuation">)</span> <span class="token keyword">var</span><span class="token punctuation">&lt;</span><span class="token keyword">storage</span><span class="token punctuation">,</span> read_write<span class="token punctuation">&gt;</span> vertices<span class="token punctuation">:</span> <span class="token class-name">VertexBuffer</span><span class="token punctuation">;</span>
<span class="token punctuation">@</span><span class="token attributes attr-name">group</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span><span class="token punctuation">@</span><span class="token attributes attr-name">binding</span><span class="token punctuation">(</span><span class="token int-literal number">2</span><span class="token punctuation">)</span> <span class="token keyword">var</span><span class="token punctuation">&lt;</span><span class="token keyword">storage</span><span class="token punctuation">,</span> read_write<span class="token punctuation">&gt;</span> indices<span class="token punctuation">:</span> <span class="token class-name">IndexBuffer</span><span class="token punctuation">;</span>
</code></pre></div><p>Our shader will expect a <code>uniform</code> buffer that includes the size of the quad grid in <code>chunk_size</code>, the <code>chunk_corner</code> that our noise algorithm should start at, and the <code>min_max_height</code> of the terrain.</p> <p>The vertex and index buffers are passed in as <code>storage</code> buffers with <code>read_write</code> enabled. We'll create the actual buffers in Rust and bind them when we execute the compute shader.</p> <p>The next part of the shader will be the functions that generate a point on the mesh and a vertex at that point:</p> <div class="language-wgsl extra-class"><pre class="language-wgsl"><code><span class="token keyword">fn</span> <span class="token functions function">terrain_point</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span>
        p<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
        <span class="token builtin">mix</span><span class="token punctuation">(</span>chunk_data<span class="token punctuation">.</span>min_max_height<span class="token punctuation">.</span>x<span class="token punctuation">,</span>chunk_data<span class="token punctuation">.</span>min_max_height<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token function-calls function">fbm</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        p<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token functions function">terrain_vertex</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function-calls function">terrain_point</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> tpx <span class="token operator">=</span> <span class="token function-calls function">terrain_point</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.1</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> v<span class="token punctuation">;</span>
    <span class="token keyword">let</span> tpz <span class="token operator">=</span> <span class="token function-calls function">terrain_point</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.0</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> v<span class="token punctuation">;</span>
    <span class="token keyword">let</span> tnx <span class="token operator">=</span> <span class="token function-calls function">terrain_point</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token decimal-float-literal number">0.1</span><span class="token punctuation">,</span> <span class="token decimal-float-literal number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> v<span class="token punctuation">;</span>
    <span class="token keyword">let</span> tnz <span class="token operator">=</span> <span class="token function-calls function">terrain_point</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span><span class="token decimal-float-literal number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token decimal-float-literal number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> v<span class="token punctuation">;</span>

    <span class="token keyword">let</span> pn <span class="token operator">=</span> <span class="token builtin">normalize</span><span class="token punctuation">(</span><span class="token builtin">cross</span><span class="token punctuation">(</span>tpz<span class="token punctuation">,</span> tpx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> nn <span class="token operator">=</span> <span class="token builtin">normalize</span><span class="token punctuation">(</span><span class="token builtin">cross</span><span class="token punctuation">(</span>tnz<span class="token punctuation">,</span> tnx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token punctuation">(</span>pn <span class="token operator">+</span> nn<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token decimal-float-literal number">0.5</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function-calls function">Vertex</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>terrain_point</code> function takes an XZ point on the terrain and returns a <code>vec3</code> with the <code>y</code> value between the min and max height values.</p> <p><code>terrain_vertex</code> uses <code>terrain_point</code> to get its position and also to compute the normal of the surface by sampling four nearby points and uses them to compute the normal using <a href="https://www.khanacademy.org/math/multivariable-calculus/thinking-about-multivariable-function/x786f2022:vectors-and-matrices/a/cross-products-mvc" target="_blank" rel="noopener noreferrer">cross products<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="note"><p>You'll notice that our <code>Vertex</code> struct doesn't include a texture coordinate. We could easily create texture coordinates by using the XZ coords of the vertices and having the texture sampler mirror the texture on the x and y axes, but heightmaps tend to have stretching when textured in this way.</p> <p>We'll cover a method called triplanar mapping to texture the terrain in a future tutorial. For now, we'll just use a procedural texture that will be created in the fragment shader we use to render the terrain.</p></div> <p>Now that we can get a vertex on the terrain surface, we can fill our vertex and index buffers with actual data. We'll create a <code>gen_terrain()</code> function that will be the entry point for our compute shader:</p> <div class="language-wgsl extra-class"><pre class="language-wgsl"><code><span class="token punctuation">@</span><span class="token attributes attr-name">compute</span> <span class="token punctuation">@</span><span class="token attributes attr-name">workgroup_size</span><span class="token punctuation">(</span><span class="token int-literal number">64</span><span class="token punctuation">)</span>
<span class="token keyword">fn</span> <span class="token functions function">gen_terrain</span><span class="token punctuation">(</span>
    <span class="token punctuation">@</span><span class="token builtin-attribute"><span class="token attribute attr-name">builtin</span><span class="token punctuation">(</span><span class="token built-in-values attr-value">global_invocation_id</span><span class="token punctuation">)</span></span> gid<span class="token punctuation">:</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">u32</span><span class="token punctuation">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// snipped...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We specify that <code>gen_terrain</code> is a compute shader entry point by annotating it with <code>stage(compute)</code>.</p> <p>The <code>workgroup_size()</code> is the number of workers the GPU can allocate per <code>workgroup</code>. We specify the number of workers when we execute the compute shader. There are technically three parameters to this as work groups are a 3d grid, but if you don't specify them, they default to 1. In other words <code>workgroup_size(64)</code> is equivalent to <code>workgroup_size(64, 1, 1)</code>.</p> <p>The <code>global_invocation_id</code> is a 3d index. This may seem weird, but you can think of work groups as a 3d grid of work groups. These workgroups have an internal grid of workers. The <code>global_invocation_id</code> is the id of the current worker relative to all the other works.</p> <p>Visually, the workgroup grid would look something like this:</p> <p><img src="/learn-wgpu/assets/img/figure_work-groups.af52f221.jpg" alt="work group grid"></p> <div class="note"><p>It may be helpful to think of a compute shader as a function that is run in a bunch of nested for loops, but each loop is executed in parallel. It would look something like this:</p> <div class="language- extra-class"><pre class="language-text"><code>for wgx in num_workgroups.x:
    for wgy in num_workgroups.y:
        for wgz in num_workgroups.z:
            var local_invocation_id = (wgx, wgy, wgz)
            for x in workgroup_size.x:
                for y in workgroup_size.x:
                    for z in workgroup_size.x:
                        var global_invocation_id = local_invocation_id * workgroup_size + (x, y, z);
                        gen_terrain(global_invocation_id)

</code></pre></div><p>If you want to learn more about workgroups, <a href="https://www.w3.org/TR/WGSL/#compute-shader-workgroups" target="_blank" rel="noopener noreferrer">check out the docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <p>TODO:</p> <ul><li>Note changes to <code>create_render_pipeline</code></li> <li>Mention <code>swizzle</code> feature for cgmath</li> <li>Compare workgroups and workgroups sizes to nested for-loops
<ul><li>Maybe make a diagram in Blender?</li></ul></li> <li>Change to camera movement speed</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/10/2026, 10:08:52 PM</span></div></footer> <!----> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/learn-wgpu/assets/js/app.9a4a1a92.js" defer></script><script src="/learn-wgpu/assets/js/3.09b12233.js" defer></script><script src="/learn-wgpu/assets/js/2.b4dddcef.js" defer></script><script src="/learn-wgpu/assets/js/32.f25ea1b1.js" defer></script>
  </body>
</html>
